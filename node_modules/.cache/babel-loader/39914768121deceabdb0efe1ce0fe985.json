{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\0. JP20-2\\\\Post Training\\\\reactjs\\\\JPokedex\\\\jpokedex\\\\src\\\\Pages\\\\SearchPage\\\\SearchPage.jsx\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { gql, useQuery } from '@apollo/client';\nimport PokemonCard from \"../../Components/PokemonCard/PokemonCard\";\nimport './SearchPage.scss';\nimport { Card, Grid, Header, Label, Placeholder, Search, Segment } from \"semantic-ui-react\";\nimport 'semantic-ui-css/semantic.min.css';\nimport { css } from \"@emotion/css\";\nimport _ from \"lodash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SearchPage() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [page, setPage] = useState(0);\n  var maxPage;\n  const POKEMON_QUERY = gql`\n    query pokemons {\n        pokemons(limit: 999999, offset: 0) {\n          count\n          next\n          previous\n          status\n          message\n          results {\n            url\n            name\n            image\n          }\n        }\n      }\n    `;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(POKEMON_QUERY, {});\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"list-page\",\n    children: [/*#__PURE__*/_jsxDEV(Card.Group, {\n      doubling: true,\n      itemsPerRow: 8,\n      className: \"card-container\",\n      children: [/*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(PokemonCard, {\n        pokemon: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        \"aria-label\": \"...\",\n        id: \"pagination-nav\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          class: \"pagination pagination-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            class: \"page-item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: prevPage,\n              class: \"page-link\",\n              href: \"#\",\n              children: \"Prev\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            class: \"page-item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: nextPage,\n              class: \"page-link\",\n              href: \"#\",\n              children: \"Next\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 23\n  }, this);\n  maxPage = Math.round(data.pokemons.count / 18);\n  console.log(maxPage);\n  console.log(data);\n  let pokemons = data.pokemons.results;\n  let searchValue = '';\n  const initialState = {\n    loading: false,\n    results: [],\n    value: ''\n  };\n\n  function searchReducer(state, action) {\n    switch (action.type) {\n      case 'CLEAN_QUERY':\n        return initialState;\n\n      case 'START_SEARCH':\n        return { ...state,\n          loading: true,\n          value: action.query\n        };\n\n      case 'FINISH_SEARCH':\n        return { ...state,\n          loading: false,\n          results: action.results\n        };\n\n      case 'UPDATE_SELECTION':\n        return { ...state,\n          value: action.selection\n        };\n\n      default:\n        throw new Error();\n    }\n  }\n\n  const resultRenderer = ({\n    name\n  }) => /*#__PURE__*/_jsxDEV(Label, {\n    content: name\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 44\n  }, this);\n\n  function SearchPokemon() {\n    _s();\n\n    const [state, dispatch] = React.useReducer(searchReducer, initialState);\n    const {\n      loading,\n      results,\n      value\n    } = state;\n    const timeoutRef = React.useRef();\n    const handleSearchChange = React.useCallback((e, data) => {\n      clearTimeout(timeoutRef.current);\n      dispatch({\n        type: 'START_SEARCH',\n        query: data.value\n      });\n      timeoutRef.current = setTimeout(() => {\n        if (data.value.length === 0) {\n          dispatch({\n            type: 'CLEAN_QUERY'\n          });\n          return;\n        }\n\n        const re = new RegExp(_.escapeRegExp(data.value), 'i');\n\n        const isMatch = result => re.test(result.name);\n\n        dispatch({\n          type: 'FINISH_SEARCH',\n          results: _.filter(pokemons, isMatch)\n        });\n      }, 300);\n    }, []);\n    React.useEffect(() => {\n      return () => {\n        clearTimeout(timeoutRef.current);\n      };\n    }, []);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: css`\n            display:flex;\n            align-items:center;\n            justify-content:center;\n            padding: 1% 0;\n            background-color: #1b1c1d;\n        `,\n      children: /*#__PURE__*/_jsxDEV(Search, {\n        loading: loading,\n        onResultSelect: (e, data) => dispatch({\n          type: 'UPDATE_SELECTION',\n          selection: data.result.title\n        }),\n        onSearchChange: handleSearchChange,\n        resultRenderer: resultRenderer,\n        results: results,\n        value: value,\n        size: \"tiny\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this);\n  } // console.log(pokemons);\n\n\n  _s(SearchPokemon, \"eyK34sYtN/wGlobeW5QOJcopodM=\");\n\n  function nextPage() {\n    if (page < maxPage) setPage(page + 1);\n  }\n\n  function prevPage() {\n    if (page > 0) setPage(page + 1);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"list-page\",\n    children: [/*#__PURE__*/_jsxDEV(SearchPokemon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card.Group, {\n      doubling: true,\n      itemsPerRow: 8,\n      className: \"card-container\",\n      children: pokemons === null || pokemons === void 0 ? void 0 : pokemons.map(pokemon => {\n        return /*#__PURE__*/_jsxDEV(PokemonCard, {\n          pokemon: pokemon\n        }, pokemon.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        \"aria-label\": \"...\",\n        id: \"pagination-nav\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          class: \"pagination pagination-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            class: \"page-item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: prevPage,\n              class: \"page-link\",\n              href: \"#\",\n              children: \"Prev\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            class: \"page-item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: nextPage,\n              class: \"page-link\",\n              href: \"#\",\n              children: \"Next\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(SearchPage, \"752wZ5lXLyz30qaoyQTDf107oDE=\", false, function () {\n  return [useQuery];\n});\n\n_c = SearchPage;\nexport default SearchPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"sources":["C:/Users/User/Documents/0. JP20-2/Post Training/reactjs/JPokedex/jpokedex/src/Pages/SearchPage/SearchPage.jsx"],"names":["React","useState","useEffect","gql","useQuery","PokemonCard","Card","Grid","Header","Label","Placeholder","Search","Segment","css","_","SearchPage","page","setPage","maxPage","POKEMON_QUERY","loading","error","data","prevPage","nextPage","Math","round","pokemons","count","console","log","results","searchValue","initialState","value","searchReducer","state","action","type","query","selection","Error","resultRenderer","name","SearchPokemon","dispatch","useReducer","timeoutRef","useRef","handleSearchChange","useCallback","e","clearTimeout","current","setTimeout","length","re","RegExp","escapeRegExp","isMatch","result","test","filter","title","map","pokemon"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from \"react\"\r\n\r\nimport {gql, useQuery} from '@apollo/client';\r\nimport PokemonCard from \"../../Components/PokemonCard/PokemonCard\";\r\nimport './SearchPage.scss';\r\nimport { Card,  Grid,  Header,  Label,  Placeholder, Search, Segment } from \"semantic-ui-react\";\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport { css } from \"@emotion/css\";\r\nimport _ from \"lodash\";\r\nfunction SearchPage(){\r\n\r\n    \r\n    const [page, setPage]=useState(0);\r\n    \r\n    var maxPage;\r\n\r\n    const POKEMON_QUERY=gql`\r\n    query pokemons {\r\n        pokemons(limit: 999999, offset: 0) {\r\n          count\r\n          next\r\n          previous\r\n          status\r\n          message\r\n          results {\r\n            url\r\n            name\r\n            image\r\n          }\r\n        }\r\n      }\r\n    `\r\n\r\n    const{loading ,error, data}=useQuery(POKEMON_QUERY,{\r\n\r\n    })\r\n\r\n    if(loading)return <div id=\"list-page\">\r\n\r\n    <Card.Group doubling itemsPerRow={8} className=\"card-container\">\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n    <PokemonCard pokemon='loading'/>\r\n\r\n    </Card.Group>\r\n    <div  className=\"center-flex\">\r\n\r\n                <nav aria-label=\"...\"  id=\"pagination-nav\">\r\n                    <ul class=\"pagination pagination-lg\">\r\n                        <li class=\"page-item\"><a onClick={prevPage} class=\"page-link\" href=\"#\">Prev</a></li>\r\n                        <li class=\"page-item\"><a onClick={nextPage} class=\"page-link\" href=\"#\">Next</a></li>\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n\r\n</div>\r\n\r\n    maxPage=Math.round(data.pokemons.count/18);\r\n    console.log(maxPage);\r\n    console.log(data);\r\n    let pokemons=data.pokemons.results;\r\n    \r\n    let searchValue=''\r\n    const initialState = {\r\n        loading: false,\r\n        results: [],\r\n        value: '',\r\n    };\r\n    function searchReducer(state, action) {\r\n        switch (action.type) {\r\n          case 'CLEAN_QUERY':\r\n            return initialState\r\n          case 'START_SEARCH':\r\n            return { ...state, loading: true, value: action.query }\r\n          case 'FINISH_SEARCH':\r\n            return { ...state, loading: false, results: action.results }\r\n          case 'UPDATE_SELECTION':\r\n            return { ...state, value: action.selection }\r\n          default:\r\n            throw new Error()\r\n        }\r\n      }\r\n      const resultRenderer = ({ name }) => <Label content={name} />\r\n      \r\n    function SearchPokemon() {\r\n    const [state, dispatch] = React.useReducer(searchReducer, initialState)\r\n    const { loading, results, value } = state\r\n  \r\n    const timeoutRef = React.useRef()\r\n    const handleSearchChange = React.useCallback((e, data) => {\r\n      clearTimeout(timeoutRef.current)\r\n      dispatch({ type: 'START_SEARCH', query: data.value })\r\n  \r\n      timeoutRef.current = setTimeout(() => {\r\n        if (data.value.length === 0) {\r\n          dispatch({ type: 'CLEAN_QUERY' })\r\n          return\r\n        }\r\n  \r\n        const re = new RegExp(_.escapeRegExp(data.value), 'i')\r\n        const isMatch = (result) => re.test(result.name)\r\n  \r\n        dispatch({\r\n          type: 'FINISH_SEARCH',\r\n          results: _.filter(pokemons, isMatch),\r\n        })\r\n      }, 300)\r\n    }, [])\r\n    React.useEffect(() => {\r\n      return () => {\r\n        clearTimeout(timeoutRef.current)\r\n      }\r\n    }, [])\r\n  \r\n    return (\r\n        <div className={css`\r\n            display:flex;\r\n            align-items:center;\r\n            justify-content:center;\r\n            padding: 1% 0;\r\n            background-color: #1b1c1d;\r\n        `}>\r\n            \r\n          <Search\r\n            loading={loading}\r\n            onResultSelect={(e, data) =>\r\n              dispatch({ type: 'UPDATE_SELECTION', selection: data.result.title })\r\n            }\r\n            onSearchChange={handleSearchChange}\r\n            resultRenderer={resultRenderer}\r\n            results={results}\r\n            value={value}\r\n            size=\"tiny\"\r\n\r\n          />\r\n        </div>\r\n\r\n  \r\n        \r\n    )\r\n  }\r\n  \r\n      \r\n    // console.log(pokemons);\r\n    function nextPage(){\r\n        if(page<maxPage)\r\n        setPage(page+1);\r\n    }\r\n    function prevPage(){\r\n        if(page>0)setPage(page+1);\r\n    }\r\n\r\n    return (\r\n        \r\n        <div id=\"list-page\">\r\n            <SearchPokemon/>            \r\n            <Card.Group doubling itemsPerRow={8} className=\"card-container\">\r\n                {pokemons?.map(pokemon=>{\r\n                    return <PokemonCard key={pokemon.name} pokemon={pokemon}/>\r\n                })}\r\n            </Card.Group>\r\n            \r\n            <div  className=\"center-flex\">\r\n                <nav aria-label=\"...\"  id=\"pagination-nav\">\r\n                    <ul class=\"pagination pagination-lg\">\r\n                        <li class=\"page-item\"><a onClick={prevPage} class=\"page-link\" href=\"#\">Prev</a></li>\r\n                        <li class=\"page-item\"><a onClick={nextPage} class=\"page-link\" href=\"#\">Next</a></li>\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nexport default SearchPage"]},"metadata":{},"sourceType":"module"}