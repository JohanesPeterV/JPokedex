{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Documents/0. JP20-2/Post Training/reactjs/JPokedex/jpokedex/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _taggedTemplateLiteral from\"C:/Users/User/Documents/0. JP20-2/Post Training/reactjs/JPokedex/jpokedex/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"C:/Users/User/Documents/0. JP20-2/Post Training/reactjs/JPokedex/jpokedex/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10;import React,{useState,useEffect}from\"react\";import{gql,useQuery}from'@apollo/client';import PokemonCard from\"../../Components/PokemonCard/PokemonCard\";import'./SearchPage.scss';import{Card,Grid,Header,Icon,Image,Label,Placeholder,Search,Segment}from\"semantic-ui-react\";import'semantic-ui-css/semantic.min.css';import{css}from\"@emotion/css\";import _ from\"lodash\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),displayPokemons=_useState2[0],setDisplayPokemon=_useState2[1];var maxPage;var searchString='';var POKEMON_QUERY=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    query pokemons {\\n        pokemons(limit: 999999, offset: 0) {\\n          count\\n          next\\n          previous\\n          status\\n          message\\n          results {\\n            url\\n            name\\n            image\\n          }\\n        }\\n      }\\n    \"])));var _useQuery=useQuery(POKEMON_QUERY,{}),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;if(loading)return/*#__PURE__*/_jsx(\"div\",{id:\"list-page\",children:/*#__PURE__*/_jsx(\"div\",{className:css(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n            display:flex;\\n            align-items:center;\\n            justify-content:center;\\n            padding: 1% 0;\\n            background-color: #1b1c1d;\\n            width:100%;\\n\\n            \\n        \"]))),children:/*#__PURE__*/_jsxs(\"div\",{className:css(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n            display:flex;                    \\n            align-items:center;\\n            justify-content:flex-end;\\n            padding: 1% 0;\\n        \"]))),children:[/*#__PURE__*/_jsx(Search,{onClick:function onClick(){},icon:null,size:\"small\"}),/*#__PURE__*/_jsx(\"div\",{className:css(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n                    position:absolute;\\n                \"]))),children:/*#__PURE__*/_jsx(Icon,{className:css(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"cursor:pointer;\"]))),onClick:function onClick(){setDisplayPokemon(pokemons.filter(function(pokemon){return pokemon.name.includes(searchString);}));},name:\"search\"})})]})})});maxPage=Math.round(data.pokemons.count/18);console.log(maxPage);console.log(data);var pokemons=data.pokemons.results;var searchValue='';var initialState={loading:false,results:[],value:''};function searchReducer(state,action){switch(action.type){case'CLEAN_QUERY':return initialState;case'START_SEARCH':return _objectSpread(_objectSpread({},state),{},{loading:true,value:action.query});case'FINISH_SEARCH':return _objectSpread(_objectSpread({},state),{},{loading:false,results:action.results});case'UPDATE_SELECTION':searchString=action.selection;return _objectSpread(_objectSpread({},state),{},{value:action.selection});default:throw new Error();}}var resultRenderer=function resultRenderer(_ref){var name=_ref.name;return/*#__PURE__*/_jsx(Label,{content:name});};function SearchPokemon(){var _React$useReducer=React.useReducer(searchReducer,initialState),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];var loading=state.loading,results=state.results,value=state.value;var timeoutRef=React.useRef();var handleSearchChange=React.useCallback(function(e,data){clearTimeout(timeoutRef.current);searchString=data.value;dispatch({type:'START_SEARCH',query:data.value});timeoutRef.current=setTimeout(function(){if(data.value.length===0){dispatch({type:'CLEAN_QUERY'});return;}var re=new RegExp(_.escapeRegExp(data.value),'i');var isMatch=function isMatch(result){return re.test(result.name);};dispatch({type:'FINISH_SEARCH',results:_.filter(pokemons,isMatch)});},300);},[]);React.useEffect(function(){return function(){clearTimeout(timeoutRef.current);};},[]);return/*#__PURE__*/_jsx(\"div\",{className:css(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n            display:flex;\\n            align-items:center;\\n            justify-content:center;\\n            padding: 1% 0;\\n            background-color: #1b1c1d;\\n            width:100%;\\n\\n        \"]))),children:/*#__PURE__*/_jsxs(\"div\",{className:css(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n            display:flex;                    \\n            align-items:center;\\n            justify-content:flex-end;\\n            padding: 1% 0;\\n        \"]))),children:[/*#__PURE__*/_jsx(Search,{loading:loading,onResultSelect:function onResultSelect(e,data){return dispatch({type:'UPDATE_SELECTION',selection:data.result.name});},onSearchChange:handleSearchChange,resultRenderer:resultRenderer,results:results,value:value,icon:null,size:\"small\"}),/*#__PURE__*/_jsx(\"div\",{className:css(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n                    position:absolute;\\n                \"]))),children:/*#__PURE__*/_jsx(Icon,{className:css(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"cursor:pointer;\"]))),onClick:function onClick(){setDisplayPokemon(pokemons.filter(function(pokemon){return pokemon.name.includes(searchString);}));},name:\"search\"})})]})});}return/*#__PURE__*/_jsxs(\"div\",{id:\"list-page\",children:[/*#__PURE__*/_jsx(SearchPokemon,{}),/*#__PURE__*/_jsx(Card.Group,{doubling:true,itemsPerRow:8,className:\"card-container \"+css(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n              height:100vw;\\n              \\n              \"]))),children:displayPokemons===null||displayPokemons===void 0?void 0:displayPokemons.map(function(pokemon){return/*#__PURE__*/_jsx(PokemonCard,{pokemon:pokemon},pokemon.name);})})]});}export default SearchPage;","map":{"version":3,"sources":["C:/Users/User/Documents/0. JP20-2/Post Training/reactjs/JPokedex/jpokedex/src/Pages/SearchPage/SearchPage.jsx"],"names":["React","useState","useEffect","gql","useQuery","PokemonCard","Card","Grid","Header","Icon","Image","Label","Placeholder","Search","Segment","css","_","SearchPage","displayPokemons","setDisplayPokemon","maxPage","searchString","POKEMON_QUERY","loading","error","data","pokemons","filter","pokemon","name","includes","Math","round","count","console","log","results","searchValue","initialState","value","searchReducer","state","action","type","query","selection","Error","resultRenderer","SearchPokemon","useReducer","dispatch","timeoutRef","useRef","handleSearchChange","useCallback","e","clearTimeout","current","setTimeout","length","re","RegExp","escapeRegExp","isMatch","result","test","map"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from \"react\"\r\n\r\nimport {gql, useQuery} from '@apollo/client';\r\nimport PokemonCard from \"../../Components/PokemonCard/PokemonCard\";\r\nimport './SearchPage.scss';\r\nimport { Card,  Grid,  Header,  Icon,  Image,  Label,  Placeholder, Search, Segment } from \"semantic-ui-react\";\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport { css } from \"@emotion/css\";\r\nimport _ from \"lodash\";\r\n\r\n\r\nfunction SearchPage(){\r\n\r\n    \r\n    const [displayPokemons, setDisplayPokemon]=useState([]);\r\n    \r\n    var maxPage;\r\n    let searchString='';\r\n    const POKEMON_QUERY=gql`\r\n    query pokemons {\r\n        pokemons(limit: 999999, offset: 0) {\r\n          count\r\n          next\r\n          previous\r\n          status\r\n          message\r\n          results {\r\n            url\r\n            name\r\n            image\r\n          }\r\n        }\r\n      }\r\n    `\r\n\r\n    const{loading ,error, data}=useQuery(POKEMON_QUERY,{\r\n\r\n    })\r\n\r\n    if(loading)return <div id=\"list-page\" >\r\n     <div className={css`\r\n            display:flex;\r\n            align-items:center;\r\n            justify-content:center;\r\n            padding: 1% 0;\r\n            background-color: #1b1c1d;\r\n            width:100%;\r\n\r\n            \r\n        `}>\r\n            <div className={css`\r\n            display:flex;                    \r\n            align-items:center;\r\n            justify-content:flex-end;\r\n            padding: 1% 0;\r\n        `}>\r\n                <Search\r\n                onClick={()=>{}}\r\n                icon={null}\r\n                size=\"small\"/>\r\n                <div className={css`\r\n                    position:absolute;\r\n                `}>\r\n                    <Icon \r\n                    className={css`cursor:pointer;`}\r\n                    onClick={()=>{\r\n                        setDisplayPokemon(pokemons.filter((pokemon)=>{\r\n                            return pokemon.name.includes(searchString);\r\n                        }));\r\n                    }} name='search'/>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n</div>\r\n    \r\n   \r\n    maxPage=Math.round(data.pokemons.count/18);\r\n    console.log(maxPage);\r\n    console.log(data);\r\n    let pokemons=data.pokemons.results;\r\n    let searchValue=''\r\n    const initialState = {\r\n        loading: false,\r\n        results: [],\r\n        value: '',\r\n    };\r\n    function searchReducer(state, action) {\r\n        switch (action.type) {\r\n          case 'CLEAN_QUERY':\r\n            return initialState\r\n          case 'START_SEARCH':\r\n            return { ...state, loading: true, value: action.query }\r\n          case 'FINISH_SEARCH':\r\n            return { ...state, loading: false, results: action.results }\r\n          case 'UPDATE_SELECTION':\r\n            searchString=action.selection;\r\n      \r\n            return { ...state, value: action.selection }\r\n          default:\r\n            throw new Error()\r\n        }\r\n      }\r\n      const resultRenderer = ({ name }) => <Label content={name} />\r\n      \r\n    function SearchPokemon() {\r\n    const [state, dispatch] = React.useReducer(searchReducer, initialState)\r\n    const { loading, results, value } = state\r\n    \r\n    const timeoutRef = React.useRef()\r\n    const handleSearchChange = React.useCallback((e, data) => {\r\n      clearTimeout(timeoutRef.current)\r\n      searchString=data.value;\r\n      dispatch({ type: 'START_SEARCH', query: data.value })\r\n  \r\n      timeoutRef.current = setTimeout(() => {\r\n        if (data.value.length === 0) {\r\n          dispatch({ type: 'CLEAN_QUERY' })\r\n          return\r\n        }\r\n  \r\n        const re = new RegExp(_.escapeRegExp(data.value), 'i')\r\n        const isMatch = (result) => re.test(result.name)\r\n  \r\n        dispatch({\r\n          type: 'FINISH_SEARCH',\r\n          results: _.filter(pokemons, isMatch),\r\n        })\r\n      }, 300)\r\n    }, [])\r\n    React.useEffect(() => {\r\n      return () => {\r\n        clearTimeout(timeoutRef.current)\r\n      }\r\n    }, [])\r\n  \r\n    return (\r\n        <div className={css`\r\n            display:flex;\r\n            align-items:center;\r\n            justify-content:center;\r\n            padding: 1% 0;\r\n            background-color: #1b1c1d;\r\n            width:100%;\r\n\r\n        `}>\r\n            <div className={css`\r\n            display:flex;                    \r\n            align-items:center;\r\n            justify-content:flex-end;\r\n            padding: 1% 0;\r\n        `}>\r\n                <Search\r\n                loading={loading}\r\n                onResultSelect={(e, data) =>dispatch({ type: 'UPDATE_SELECTION', selection: data.result.name })}\r\n                onSearchChange={handleSearchChange}\r\n                resultRenderer={resultRenderer}\r\n                results={results}\r\n                value={value}\r\n                icon={null}\r\n                size=\"small\"/>\r\n                <div className={css`\r\n                    position:absolute;\r\n                `}>\r\n                    <Icon \r\n                    className={css`cursor:pointer;`}\r\n                    onClick={()=>{\r\n                        setDisplayPokemon(pokemons.filter((pokemon)=>{\r\n                            return pokemon.name.includes(searchString);\r\n                        }));\r\n                    }} name='search'/>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n\r\n\r\n        \r\n    )\r\n  }\r\n\r\n\r\n    return (\r\n        \r\n        <div id=\"list-page\">\r\n            <SearchPokemon/>            \r\n            <Card.Group doubling itemsPerRow={8} className={\"card-container \"+css`\r\n              height:100vw;\r\n              \r\n              `}>\r\n                {displayPokemons?.map(pokemon=>{\r\n                    return <PokemonCard key={pokemon.name} pokemon={pokemon}/>\r\n                })}\r\n            </Card.Group>\r\n        </div>\r\n        \r\n    )\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nexport default SearchPage"]},"metadata":{},"sourceType":"module"}